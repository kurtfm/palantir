{
	"id": "0a36303e-b173-beaf-fa03-73bf3ada0584",
	"name": "Brand APIs",
	"description": "Identity Services Brand APIs Monitoring Collection",
	"order": [],
	"folders": [
		{
			"id": "4b5cb4ca-ff87-e7be-cdf0-5ce1a7568481",
			"name": "0.authorization",
			"description": "",
			"order": [
				"eb9ea1a6-1a26-cccd-1547-c6da13863e49"
			],
			"owner": "197134",
			"collectionId": "d2c32830-9e9c-da16-e516-af7314709865"
		},
		{
			"id": "63776b96-59d1-db67-88f7-a07e8fd26463",
			"name": "1.auth-user",
			"description": "tests related to authentication of Brand API users",
			"order": [
				"272a5e15-35cc-ff8a-9818-309dfb4e5ce3",
				"16129a1c-e61a-2591-099c-d35e89084b96"
			],
			"owner": "197134",
			"collectionId": "d2c32830-9e9c-da16-e516-af7314709865"
		}
	],
	"timestamp": 1446065243882,
	"owner": "197134",
	"remoteLink": "",
	"public": false,
	"requests": [
		{
			"id": "16129a1c-e61a-2591-099c-d35e89084b96",
			"headers": "Authorization: Bearer {{user_access_token}}\nX-AOL-API-CTX: eyJwZWVyX2lwIjoiMC4wLjAuMCIsImNoYWQiOiJhc2Zhc2RmIiwicmVmZXJyZXIiOiJodHRwOi8vd3d3LmVuZ2FkZ2V0LmNvbSIsInVhdXRoaWQiOiIzNDV3dzQ1MzQiLCJncmF2aXR5IjoieHh4eCJ9\nContent-Type: application/json\n",
			"url": "{{brand_api_server}}getUser",
			"preRequestScript": "",
			"pathVariables": {},
			"method": "POST",
			"data": [],
			"dataMode": "raw",
			"version": 2,
			"tests": "var response = responseBody !== '' ? JSON.parse(responseBody) : {};\nvar userId = typeof response.data.id !== 'undefined' ? response.data.id : 0;\npostman.setEnvironmentVariable(\"user_id\", userId);\n//tests\ntests[\"getUser success\"] = typeof response.status !== 'undefined' && response.status == 'success';\ntests[\"Got user data\"] = userId ? 1 : 0;",
			"currentHelper": "normal",
			"helperAttributes": {},
			"time": 1447376387972,
			"name": "getUser",
			"description": "getUser data from access_token",
			"collectionId": "0a36303e-b173-beaf-fa03-73bf3ada0584",
			"responses": [],
			"rawModeData": "{\"namespace\":\"brandnamespace\"}",
			"folder": "63776b96-59d1-db67-88f7-a07e8fd26463"
		},
		{
			"id": "272a5e15-35cc-ff8a-9818-309dfb4e5ce3",
			"headers": "Authorization: Bearer {{service_access_token}}\nX-AOL-API-CTX: eyJwZWVyX2lwIjoiMC4wLjAuMCIsImNoYWQiOiJhc2Zhc2RmIiwicmVmZXJyZXIiOiJodHRwOi8vd3d3LmVuZ2FkZ2V0LmNvbSIsInVhdXRoaWQiOiIzNDV3dzQ1MzQiLCJncmF2aXR5IjoieHh4eCJ9\n",
			"url": "{{oauth_server}}",
			"preRequestScript": "",
			"pathVariables": {},
			"method": "POST",
			"data": [
				{
					"key": "username",
					"value": "{{local_user_email}}",
					"type": "text",
					"enabled": true
				},
				{
					"key": "grant_type",
					"value": "password",
					"type": "text",
					"enabled": true
				},
				{
					"key": "scope",
					"value": "brand_api",
					"type": "text",
					"enabled": true
				},
				{
					"key": "password",
					"value": "{{local_user_password}}",
					"type": "text",
					"enabled": true
				}
			],
			"dataMode": "urlencoded",
			"version": 2,
			"tests": "var response = responseBody !== '' ? JSON.parse(responseBody) : {};\nvar userAccessToken = typeof response.access_token !== 'undefined' ? response.access_token : 0;\nvar userRefreshToken = typeof response.refresh_token !== 'undefined' ? response.refresh_token : 0;\npostman.setEnvironmentVariable(\"user_access_token\", userAccessToken);\npostman.setEnvironmentVariable(\"user_refresh_token\", userRefreshToken);\n//tests\ntests[\"Got user access_token\"] = userAccessToken ? 1 : 0;\ntests[\"Got user refresh_token\"] = userRefreshToken ? 1 : 0;\n",
			"currentHelper": "normal",
			"helperAttributes": {},
			"time": 1447448328672,
			"name": "authLocalUser (OAuth)",
			"description": "Obtain an OAuth2 access_token for a user using local login for use with some Brand APIs",
			"collectionId": "0a36303e-b173-beaf-fa03-73bf3ada0584",
			"responses": [],
			"folder": "63776b96-59d1-db67-88f7-a07e8fd26463"
		},
		{
			"id": "eb9ea1a6-1a26-cccd-1547-c6da13863e49",
			"headers": "",
			"url": "{{oauth_server}}",
			"preRequestScript": "function base64url(source) {\n  encodedSource = CryptoJS.enc.Base64.stringify(source);\n  encodedSource = encodedSource.replace(/=+$/, '');\n  encodedSource = encodedSource.replace(/\\+/g, '-');\n  encodedSource = encodedSource.replace(/\\//g, '_');\n  \n  return encodedSource;\n}\nvar header = {\n  \"alg\": \"HS256\",\n  \"typ\": \"JWT\"\n};\nvar stringifiedHeader = CryptoJS.enc.Utf8.parse(JSON.stringify(header));\nvar encodedHeader = base64url(stringifiedHeader);\nvar now = new Date() / 1000;\n//var jwsLife = ( 24 * 60 * 60 );\nvar jwsLife = 10;\nvar body = {\n    \"iss\": postman.getEnvironmentVariable(\"client_id\"),\n    \"sub\": postman.getEnvironmentVariable(\"client_id\"),\n    \"aud\": postman.getEnvironmentVariable(\"oauth_server\"),\n    \"iat\": now,\n    \"exp\": now + jwsLife,\n};\n\nvar stringifiedBody = CryptoJS.enc.Utf8.parse(JSON.stringify(body));\nvar encodedBody = base64url(stringifiedBody);\nvar token = encodedHeader + \".\" + encodedBody;\nvar signature = CryptoJS.HmacSHA256(token, postman.getEnvironmentVariable(\"client_secret\"));\nsignature = base64url(signature);\nvar signedToken = token + \".\" + signature;\npostman.setEnvironmentVariable(\"jws\", signedToken);",
			"pathVariables": {},
			"method": "POST",
			"data": [
				{
					"key": "grant_type",
					"value": "client_credentials",
					"type": "text",
					"enabled": true
				},
				{
					"key": "client_assertion_type",
					"value": "urn:ietf:params:oauth:client-assertion-type:jwt-bearer",
					"type": "text",
					"enabled": true
				},
				{
					"key": "scope",
					"value": "brand_api ropc",
					"type": "text",
					"enabled": true
				},
				{
					"key": "client_assertion",
					"value": "{{jws}}",
					"type": "text",
					"enabled": true
				}
			],
			"dataMode": "urlencoded",
			"version": 2,
			"tests": "var response = responseBody !== '' ? JSON.parse(responseBody) : {};\nvar serviceAccessToken = typeof response.access_token !== 'undefined' ? response.access_token : 0;\npostman.setEnvironmentVariable(\"service_access_token\", serviceAccessToken);\n//tests\ntests[\"Got Service access_token\"] = serviceAccessToken ? 1:0;",
			"currentHelper": "normal",
			"helperAttributes": {},
			"time": 1447375935641,
			"name": "getServiceToken (OAuth) for auth",
			"description": "Obtain a Brand API service access token from the AOL OAuth2 endpoint",
			"collectionId": "0a36303e-b173-beaf-fa03-73bf3ada0584",
			"responses": [],
			"folder": "4b5cb4ca-ff87-e7be-cdf0-5ce1a7568481"
		}
	]
}